(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1505:function(t,e,n){"use strict";n.r(e);var r=n(2),o=(n(25),n(48),n(17)),c=n(34),_={layout:"default",data:function(){return{accounts:[],stepReset:1}},created:function(){this.$store.state.model.requerants.read?this.init():o.a.$on("model-initialised",function(){this.init()}.bind(this))},methods:{toggle:function(t){t.show=!t.show,this.stepReset++},init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$model.requerants().getList();case 2:t.accounts=e.sent,i=0;case 4:if(!(i<t.accounts.length)){e.next=15;break}return e.next=7,t.$model.requerant_contract_register().getContracts(t.accounts[i].address);case 7:for(n=e.sent,t.accounts[i].contracts=n,t.stepReset++,t.accounts[i].dabTotal=0,r=0;r<t.accounts[i].contracts.length;r++)o=t.accounts[i].contracts[r],c.a.read(o.hash).then(function(data){data=JSON.parse(data),this.currentVue.accounts[this.i].contracts[this.j].data=data;var t=this.currentVue.$model.dab().getRemoteParcellePoolDABs(data.parcelle.uuid,data.pool.uuid);this.currentVue.accounts[this.i].dabTotal+=t,this.currentVue.accounts[this.i].contracts[this.j].data.dab=t,this.currentVue.stepReset++}.bind({currentVue:t,j:r,i:i}));case 12:i++,e.next=4;break;case 15:case"end":return e.stop()}}),e)})))()}}},l=n(84),component=Object(l.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.accounts.length<1?[e("h2",[t._v("Aucun compte requérant pour le moment")])]:[e("h2",[t._v("Liste des comptes requérants")]),t._v(" "),t.$store.state.model.requerants.read?t._e():e("div",[t._v("Chargement...")]),t._v(" "),t.$store.state.model.requerants.read?e("table",{key:t.stepReset},[t._m(0),t._v(" "),t._l(t.accounts,(function(n,r){return e("tr",[e("td",[t._v(t._s(n.email))]),t._v(" "),e("td",[t._v(t._s(n.patronyme))]),t._v(" "),e("td",[t._v(t._s(n.address))]),t._v(" "),e("td",[e("ul",[n.contracts?t._e():e("li",[t._v("Chargement en cours...")]),t._v(" "),n.contracts&&0==n.contracts.length?e("li",[t._v("Pas de contrat")]):t._e(),t._v(" "),t._l(n.contracts,(function(n,r){return e("li",[e("strong",[e("a",{attrs:{target:"_blank",href:n.url}},[t._v(t._s(n.address))])]),t._v(" "),n.show?t._e():e("button",{on:{click:function(e){return t.toggle(n)}}},[t._v("Voir "),e("i",{staticClass:"fa fa-eye"})]),t._v(" "),n.show?e("button",{on:{click:function(e){return t.toggle(n)}}},[t._v("Cacher "),e("i",{staticClass:"fa fa-eye-slash"})]):t._e(),t._v(" "),n.show?e("div",[n.data?t._e():[t._v("\n                hash: "+t._s(n.hash)),e("br")],t._v(" "),n.data?[e("ul",[e("li",[e("strong",[t._v("Parcelle")]),t._v(": "+t._s(n.data.parcelle.id))]),t._v(" "),e("li",[e("strong",[t._v("Pool")]),t._v(": "+t._s(n.data.pool.pool))]),t._v(" "),e("li",[e("strong",[t._v("DAB")]),t._v(": "+t._s(n.data.dab))]),t._v(" "),e("li",[e("pre",[t._v(t._s(n.data.info))])])])]:t._e()],2):t._e()])}))],2)]),t._v(" "),e("td",[t._v(t._s(n.dabTotal))])])}))],2):t._e()]],2)}),[function(){var t=this,e=t._self._c;return e("tr",[e("th",[t._v("Email")]),t._v(" "),e("th",[t._v("Patronyme")]),t._v(" "),e("th",[t._v("Adresse")]),t._v(" "),e("th",[t._v("Contrats")]),t._v(" "),e("th",[t._v("Somme des DABs")])])}],!1,null,null,null);e.default=component.exports}}]);